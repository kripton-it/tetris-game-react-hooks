(window["webpackJsonptetris-react"]=window["webpackJsonptetris-react"]||[]).push([[0],{12:function(e,n,t){e.exports=t.p+"static/media/bg.2810fe6b.png"},15:function(e,n,t){e.exports=t(27)},20:function(e,n,t){},26:function(e,n,t){},27:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),c=t(9),a=t.n(c),i=(t(20),t(4)),u=t(1),l=function(){return Array.from(Array(20),function(){return new Array(12).fill(["empty","clear"])})},f=function(e,n,t){for(var r=t.x,o=t.y,c=0;c<e.tetromino.length;c++)for(var a=0;a<e.tetromino[0].length;a++)if(0!==e.tetromino[c][a]&&(!n[c+e.pos.y+o]||!n[c+e.pos.y+o][a+e.pos.x+r]||"clear"!==n[c+e.pos.y+o][a+e.pos.x+r][1]))return!0},p=t(2),s=t(3);function b(){var e=Object(p.a)(["\n  width: auto;\n  background-color: rgba(",", 0.8);\n  border-style: solid;\n  border-width: ",";\n  border-bottom-color: rgba(",", 0.1);\n  border-right-color: rgba(",", 1);\n  border-top-color: rgba(",", 1);\n  border-left-color: rgba(",", 0.3);\n"]);return b=function(){return e},e}var d=s.a.div(b(),function(e){return e.color},function(e){return"empty"===e.type?0:"4px"},function(e){return e.color},function(e){return e.color},function(e){return e.color},function(e){return e.color}),m={empty:{shape:[[0]],color:"0, 0, 0"},I:{shape:[[0,"I",0,0],[0,"I",0,0],[0,"I",0,0],[0,"I",0,0]],color:"80, 227, 230"},J:{shape:[[0,"J",0],[0,"J",0],["J","J",0]],color:"36, 95, 223"},L:{shape:[[0,"L",0],[0,"L",0],[0,"L","L"]],color:"223, 153, 36"},O:{shape:[["O","O"],["O","O"]],color:"223, 255, 36"},S:{shape:[[0,"S","S"],["S","S",0],[0,0,0]],color:"48, 211, 56"},T:{shape:[[0,"T",0],["T","T","T"],[0,0,0]],color:"132, 61, 198"},Z:{shape:[["Z","Z",0],[0,"Z","Z"],[0,0,0]],color:"227, 78, 78"}},O=function(){var e=Math.floor(Math.random()*"IJLOTSZ".length);return m["IJLOTSZ"[e]]},v=Object(r.memo)(function(e){var n=e.type;return o.a.createElement(d,{type:n,color:m[n].color})});function y(){var e=Object(p.a)(["\n  width: 100%;\n  max-width: 25vw;\n  display: grid;\n  grid-template-rows: repeat(\n    ",",\n    calc(25vw / ",")\n  );\n  grid-template-columns: repeat(",", 1fr);\n  grid-gap: 1px;\n  border: 2px solid #333333;\n  background-color: #111111;\n"]);return y=function(){return e},e}var g=s.a.div(y(),function(e){return e.height},function(e){return e.width},function(e){return e.width}),h=function(e){var n=e.stage;return o.a.createElement(g,{width:12,height:20},n.map(function(e){return e.map(function(e,n){return o.a.createElement(v,{key:n,type:e[0]})})}))};function j(){var e=Object(p.a)(["\n  box-sizing: border-box;\n  display: flex;\n  align-items: center;\n  margin: 0;\n  margin-bottom: 20px;\n  padding: 20px;\n  border: 4px solid #333333;\n  min-height: 30px;\n  width: 100%;\n  border-radius: 20px;\n  color: ",";\n  background-color: #000000;\n  font-size: 0.8rem;\n"]);return j=function(){return e},e}var x=s.a.div(j(),function(e){return e.isGameOver?"red":"#999999"}),w=function(e){var n=e.isGameOver,t=e.text;return o.a.createElement(x,{isGameOver:n},t)};function E(){var e=Object(p.a)(["\n  box-sizing: border-box;\n  margin: 0;\n  margin-bottom: 20px;\n  padding: 20px;\n  min-height: 30px;\n  width: 100%;\n  border-radius: 20px;\n  border: none;\n  color: #ffffff;\n  background-color: #333333;\n  font: inherit;\n  font-size: 1rem;\n  cursor: pointer;\n  outline: none;\n  transition: background-color 0.5s;\n\n  &:hover {\n    background-color: #222222;\n  }\n"]);return E=function(){return e},e}var k=s.a.button(E()),S=function(e){var n=e.handleClick;return o.a.createElement(k,{type:"button",onClick:n},"Start Game")},P=t(12),I=t.n(P);function J(){var e=Object(p.a)(["\n  display: flex;\n  align-items: flex-start;\n  padding: 40px;\n  margin: 0 auto;\n  max-width: 900px;\n\n  aside {\n    width: 100%;\n    max-width: 200px;\n    display: block;\n    padding: 0 20px;\n  }\n"]);return J=function(){return e},e}function D(){var e=Object(p.a)(["\n  width: 100vw;\n  height: 100vh;\n  background-color: #000000;\n  background-image: url(",");\n  background-size: cover;\n  overflow: hidden;\n"]);return D=function(){return e},e}var L=s.a.div(D(),I.a),C=s.a.div(J());function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}var Z={x:5,y:0},G=function(){var e=Object(r.useState)({pos:Z,tetromino:m.empty.shape,collided:!1}),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(r.useCallback)(function(){o({pos:Z,tetromino:O().shape,collided:!1,direction:Math.random()>.5?1:-1})},[]);return[t,function(e){var n=e.x,t=e.y,r=e.collided;o(function(e){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(t,!0).forEach(function(n){Object(i.a)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}({},e,{collided:r,pos:{x:e.pos.x+n,y:e.pos.y+t}})})},c,function(e,n){console.log(n);var r=JSON.parse(JSON.stringify(t));r.tetromino=function(e,n){var t=e.map(function(n,t){return e.map(function(e){return e[t]})});return n>0?t.map(function(e){return e.reverse()}):t.reverse()}(r.tetromino,n),f(r,e,{x:0,y:0})&&(r.tetromino=t.tetromino),o(r)}]},z=function(e,n){var t=Object(r.useState)(l()),o=Object(u.a)(t,2),c=o[0],a=o[1],i=Object(r.useState)(0),f=Object(u.a)(i,2),p=f[0],s=f[1];return Object(r.useEffect)(function(){s(0);var t=function(e,n){return n.every(function(e){return"empty"!==e[0]})?(s(function(e){return e+1}),e.unshift(new Array(12).fill(["empty","clear"]))):e.push(n),e},r=function(r){var o=r.map(function(e){return e.map(function(e){return"clear"===e[1]?["empty","clear"]:e})});return e.tetromino.forEach(function(n,t){n.forEach(function(n,r){0!==n&&(o[t+e.pos.y][r+e.pos.x]=[n,"".concat(e.collided?"merged":"clear")])})}),e.collided?(n(),function(e){return e.reduce(t,[])}(o)):o};a(function(e){return r(e)})},[e,n]),[c,a,p]};function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function M(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(t,!0).forEach(function(n){Object(i.a)(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(t).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var N=function(){var e=Object(r.useState)(null),n=Object(u.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(!1),i=Object(u.a)(a,2),p=i[0],s=i[1],b=G(),d=Object(u.a)(b,4),m=d[0],O=d[1],v=d[2],y=d[3],g=z(m,v),j=Object(u.a)(g,3),x=j[0],E=j[1],k=function(e){var n=Object(r.useState)(0),t=Object(u.a)(n,2),o=t[0],c=t[1],a=Object(r.useState)(0),i=Object(u.a)(a,2),l=i[0],f=i[1],p=Object(r.useState)(0),s=Object(u.a)(p,2),b=s[0],d=s[1],m=Object(r.useCallback)(function(){e>0&&(c(function(n){return n+100*e*(b+1)*Math.pow(2,e-1)}),f(function(n){return n+e}))},[b,e]);return Object(r.useEffect)(function(){m()},[m,e,o]),[o,c,l,f,b,d]}(j[2]),P=Object(u.a)(k,6),I=P[0],J=P[1],D=P[2],T=P[3],Z=P[4],A=P[5],N=function(e){var n={x:e,y:0};f(m,x,n)||O(M({},n,{collided:!1}))},K=function(){return Z<19?1e3-50*Z:100},R=function(){D>=10*(Z+1)&&(A(function(e){return e+1}),c(K()));var e={x:0,y:1};f(m,x,e)?m.pos.y<1?(s(!0),c(null)):O({x:0,y:0,collided:!0}):O(M({},e,{collided:!1}))};return function(e,n){var t=Object(r.useRef)();Object(r.useEffect)(function(){t.current=e},[e]),Object(r.useEffect)(function(){if(null!==n){var e=setInterval(function(){t.current()},n);return function(){clearInterval(e)}}},[n])}(R,t),o.a.createElement(L,{role:"button",tabIndex:"0",onKeyDown:function(e){var n=e.keyCode;if(!p)switch(n){case 37:N(-1);break;case 39:N(1);break;case 40:c(null),R();break;case 38:y(x,m.direction)}},onKeyUp:function(e){var n=e.keyCode;p||40===n&&c(K())}},o.a.createElement(C,null,o.a.createElement(h,{stage:x}),o.a.createElement("aside",null,p?o.a.createElement(w,{isGameOver:p,text:"Game Over"}):o.a.createElement("div",null,o.a.createElement(w,{text:"Score: ".concat(I)}),o.a.createElement(w,{text:"Rows: ".concat(D)}),o.a.createElement(w,{text:"Level: ".concat(Z)})),o.a.createElement(S,{handleClick:function(){E(l()),v(),s(!1),c(1e3),A(0),T(0),J(0)}}))))},K=(t(26),function(){return o.a.createElement("div",{className:"App"},o.a.createElement(N,null))});a.a.render(o.a.createElement(K,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.55940be0.chunk.js.map